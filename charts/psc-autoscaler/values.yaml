replicaCount: 3
image:
  repository: public.ecr.aws/perfectscale-io/psc-autoscaler
  pullPolicy: Always
  tag: "v1.0.0"
settings:
  port: 8443
  env: "prod"
  logLevel: "DEBUG"
  psUrl: "https://api.app.perfectscale.io"
  telemetryUrl: "https://api.app.perfectscale.io/psc-telemetry"
  pushTelemetryFrequency: "1m"
  restartDeploymentThreshold: 0.1 # defines the number of bypassed pods of the deployment below which we restart individual pods
  bypassedPodsCheckInterval: "30m"
  httpTimeout: "3m"
  httpProxyEnabled: false
  httpProxy: "" #example: http://squid-proxy-service.default:3128
  httpsProxy: "" #example$ http://squid-proxy-service.default:3128
  noProxy: "" #example: ".cluster.local,.svc.cluster.local,172.20.0.1," the line must end with a coma, 172.20.0.1 it is KUBERNETES_SERVICE_HOST, API SERVICE
  excludedNamespaces: ["kube-system"]
cmd:
  serve:
    resources:
      limits:
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi
  sync:
    resources:
      limits:
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi
  evict:
    resources:
      limits:
        memory: 256Mi
      requests:
        cpu: 100m
        memory: 128Mi
secret:
  create: false
  name: "perfectscale-secret"
  clientId: ""
  clientSecret: ""
nameOverride: ""
fullnameOverride: ""
## Annotations to add to the deployment
annotations: {}
priorityClass:
  enabled: false
  create: false
  name: perfectscale-autoscaler
  preemptionpolicy: PreemptLowerPriority
  value: ''
## Role Based Access
## Ref: https://kubernetes.io/docs/admin/authorization/rbac/
##
rbac:
  enabled: true
# Using host network namespace for serve pod
hostNetwork:
  enabled: false
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""
podSecurityContext: {}
# fsGroup: 2000

securityContext: {}
# runAsNonRoot: true
# fsGroup: 1002
# runAsGroup: 1002
# runAsUser: 1002

service:
  type: ClusterIP
  port: 8443
# Pod toleration rules.
# Ref: https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/
tolerations: {}
# Pod node selector rules.
# Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/
nodeSelector: {}
# Pod affinity rules.
# Ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
affinity: {}
# Timeout for webhook
# Ref: https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#timeouts
admission:
  timeout: 15
  # Optionally change it to "Fail"
  failurePolicy: "Ignore"
integrationTests:
  enabled: true
  image:
    repository: public.ecr.aws/perfectscale-io/psc-autoscaler
    tag: "v0.1.23-int-tests"
  serviceAccount:
    # Specifies whether a service account should be created
    create: true
    # Annotations to add to the service account
    annotations: {}
    # The name of the service account to use.
    # If not set and create is true, a name is generated using the fullname template
    name: ""
  rbac:
    enabled: true
  settings:
    cleanup: "true"
  resources:
    requests:
      cpu: 100m
      memory: 100Mi
# Cluster automation configuration
clusterAutomationConfig:
  automation:
    operational:
      stopAllAutomation: false
      timeConstraints:
        maxAutomationFrequency: "30m"
        maintenanceWindow:
          monday:
            - "00:00-23:59"
          tuesday:
            - "00:00-23:59"
          wednesday:
            - "00:00-23:59"
          thursday:
            - "00:00-23:59"
          friday:
            - "00:00-23:59"
          saturday:
            - "00:00-23:59"
          sunday:
            - "00:00-23:59"
      restrictions:
        workloadMinWasteUSDPerMonth: 5
        cpuManagement:
          request:
            increaseEnabled: false
            decreaseEnabled: true
            minimumCores: -1
            maximumCores: -1
          limit:
            keepLimit: true
        memoryManagement:
          request:
            increaseEnabled: false
            decreaseEnabled: true
            minimumGiB: -1
            maximumGiB: -1
          limit:
            increaseEnabled: false
            decreaseEnabled: false
            minimumGiB: -1
            maximumGiB: -1
            memoryLeakDetection:
              maxMemoryIncreaseIterations:
                daily: 3
                weekly: 6
